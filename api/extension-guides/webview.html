<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webview API | Hello VuePress</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/vscode-doc-zh/assets/css/0.styles.0c09eec2.css" as="style"><link rel="preload" href="/vscode-doc-zh/assets/js/app.79cc50a5.js" as="script"><link rel="preload" href="/vscode-doc-zh/assets/js/2.6081b710.js" as="script"><link rel="preload" href="/vscode-doc-zh/assets/js/30.6c266e85.js" as="script"><link rel="prefetch" href="/vscode-doc-zh/assets/js/10.dcf0234a.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/11.3443e88c.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/12.33618473.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/13.f5bcdba3.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/14.069ed78b.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/15.8ad5337f.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/16.27611e97.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/17.ae2dc47b.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/18.4a6eb331.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/19.17a60d3f.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/20.7de46031.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/21.84669414.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/22.9afacd9c.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/23.f216dfdc.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/24.0cc96f6f.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/25.be98c8b0.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/26.9406d5cd.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/27.c82f8665.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/28.14ff35c2.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/29.0b9194ef.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/3.3c269ca0.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/31.71b1efc9.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/32.a260662e.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/33.ebd1b0e9.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/34.8c89ccc9.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/35.8c56c023.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/36.bb77a714.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/37.fff25a6d.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/38.c898d862.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/39.2754f4ea.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/4.8ce84c45.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/40.08340174.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/41.022c4327.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/42.a6524d2e.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/43.8f0dd455.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/44.b23d9f65.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/45.04fcf627.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/46.789e9716.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/47.33d6f209.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/48.135250ff.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/49.3d6d3bb5.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/5.62e47b4c.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/50.44990f04.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/51.6ca0374b.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/52.eb83c9e0.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/53.9a022f02.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/54.7da689eb.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/55.25e75232.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/6.83a6b4a3.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/7.eefd45de.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/8.aa200fb5.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/9.6259a5ab.js">
    <link rel="stylesheet" href="/vscode-doc-zh/assets/css/0.styles.0c09eec2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-navbar"><!----> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/vscode-doc-zh/" class="sidebar-link">首页</a></li><li><a href="/vscode-doc-zh/api/" class="sidebar-link">扩展 API</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webview-api"><a href="#webview-api" aria-hidden="true" class="header-anchor">#</a> Webview API</h1> <p>The webview API allows extensions to create fully customizable views within Visual Studio Code. For example, the built-in Markdown extension uses webviews to render Markdown previews. Webviews can also be used to build complex user interfaces beyond what VS Code's native APIs support.</p> <p>Think of a webview as an <code>iframe</code> within VS Code that your extension controls. A webview can render almost any HTML content in this frame, and it communicates with extensions using message passing. This freedom makes webviews incredibly powerful, and opens up a whole new range of extension possibilities.</p> <h2 id="links"><a href="#links" aria-hidden="true" class="header-anchor">#</a> Links</h2> <ul><li><a href="https://github.com/Microsoft/vscode-extension-samples/blob/master/webview-sample/README.md" target="_blank" rel="noopener noreferrer">Webview Sample<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="vs-code-api-usage"><a href="#vs-code-api-usage" aria-hidden="true" class="header-anchor">#</a> VS Code API Usage</h3> <ul><li><a href="/api/references/vscode-api#window.createWebviewPanel"><code>window.createWebviewPanel</code></a></li> <li><a href="/api/references/vscode-api#window.registerWebviewPanelSerializer"><code>window.registerWebviewPanelSerializer</code></a></li></ul> <h2 id="should-i-use-a-webview"><a href="#should-i-use-a-webview" aria-hidden="true" class="header-anchor">#</a> Should I use a webview?</h2> <p>Webviews are pretty amazing, but they should also be used sparingly and only when VS Code's native API is inadequate. Webviews are resource heavy and run in a separate context from normal extensions. A poorly designed webview can also easily feel out of place within VS Code.</p> <p>Before using a webview, please consider the following:</p> <ul><li><p>Does this functionality really need to live within VS Code? Would it be better as a separate application or website?</p></li> <li><p>Is a webview the only way to implement your feature? Can you use the regular VS Code APIs instead?</p></li> <li><p>Will your webview add enough user value to justify its high resource cost?</p></li></ul> <p>Remember: Just because you can do something with webviews, doesn't mean you should. However, if you are confident that you need to use webviews, then this document is here to help. Let's get started.</p> <h2 id="webviews-api-basics"><a href="#webviews-api-basics" aria-hidden="true" class="header-anchor">#</a> Webviews API basics</h2> <p>To explain the webview API, we are going to build a simple extension called <strong>Cat Coding</strong>. This extension will use a webview to show a gif of a cat writing some code (presumably in VS Code). As we work through the API, we'll continue adding functionality to the extension, including a counter that keeps track of how many lines of source code our cat has written and notifications that inform the user when the cat introduces a bug.</p> <p>Here's the <code>package.json</code> for the first version of the <strong>Cat Coding</strong> extension. You can find the complete code for the example app <a href="https://github.com/Microsoft/vscode-extension-samples/blob/master/webview-sample/README.md" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The first version of our extension <a href="/api/references/contribution-points#contributes.commands">contributes a command</a> called <code>catCoding.start</code>. When a user invokes this command, we will show a simple webview with our cat in it. Users will be able to invoke this command from the <strong>Command Palette</strong> as <strong>Cat Coding: Start new cat coding session</strong> or even create a keybinding for it if they are so inclined.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cat-coding&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cat Coding&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;publisher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bierner&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.23.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;onCommand:catCoding.start&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./out/src/extension&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;catCoding.start&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Start new cat coding session&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;category&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cat Coding&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode:prepublish&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc -p ./&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;compile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc -watch -p ./&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;postinstall&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./node_modules/vscode/bin/install&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@types/node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.4.6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.8.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now let's implement the <code>catCoding.start</code> command. In our extension's main file, we register the <code>catCoding.start</code> command and use it to show a basic webview:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Create and show a new webview</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span> <span class="token comment">// Identifies the type of the webview. Used internally</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span> <span class="token comment">// Title of the panel displayed to the user</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span> <span class="token comment">// Editor column to show the new webview panel in.</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// Webview options. More on these later.</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>vscode.window.createWebviewPanel</code> function creates and shows a webview in the editor. Here is what you see if you try running the <code>catCoding.start</code> command in its current state:</p> <p><img src="images/webview/basics-no_content.png" alt="An empty webview"></p> <p>Our command opens a new webview panel with the correct title, but with no content! To add our cat to new panel, we also need to set the HTML content of the webview using <code>webview.html</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Create and show panel</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// And set its HTML content</span>
      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Cat Coding&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;
&lt;/body&gt;
&lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you run the command again, now the webview looks like this:</p> <p><img src="images/webview/basics-html.png" alt="A webview with some HTML"></p> <p>Progress!</p> <p><code>webview.html</code> should always be a complete HTML document. HTML fragments or malformed HTML may cause unexpected behavior.</p> <h3 id="updating-webview-content"><a href="#updating-webview-content" aria-hidden="true" class="header-anchor">#</a> Updating webview content</h3> <p><code>webview.html</code> can also update a webview's content after it has been created. Let's use this to make <strong>Cat Coding</strong> more dynamic by introducing a rotation of cats:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cats <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'Coding Cat'</span><span class="token punctuation">:</span> <span class="token string">'https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif'</span><span class="token punctuation">,</span>
  <span class="token string">'Compiling Cat'</span><span class="token punctuation">:</span> <span class="token string">'https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> iteration <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token function-variable function">updateWebview</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> cat <span class="token operator">=</span> iteration<span class="token operator">++</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">'Compiling Cat'</span> <span class="token punctuation">:</span> <span class="token string">'Coding Cat'</span><span class="token punctuation">;</span>
        panel<span class="token punctuation">.</span>title <span class="token operator">=</span> cat<span class="token punctuation">;</span>
        panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token comment">// Set initial content</span>
      <span class="token function">updateWebview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// And schedule updates to the content every second</span>
      <span class="token function">setInterval</span><span class="token punctuation">(</span>updateWebview<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token parameter">cat<span class="token punctuation">:</span> <span class="token keyword">keyof</span> <span class="token keyword">typeof</span> cats</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Cat Coding&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cats<span class="token punctuation">[</span>cat<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; width=&quot;300&quot; /&gt;
&lt;/body&gt;
&lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="images/webview/basics-update.gif" alt="Updating the webview content"></p> <p>Setting <code>webview.html</code> replaces the entire webview content, similar to reloading an iframe. This is important to remember once you start using scripts in a webview, since it means that setting <code>webview.html</code> also resets the script's state.</p> <p>The example above also uses <code>webview.title</code> to change the title of the document displayed in the editor. Setting the title does not cause the webview to be reloaded.</p> <h3 id="lifecycle"><a href="#lifecycle" aria-hidden="true" class="header-anchor">#</a> Lifecycle</h3> <p>Webview panels are owned by the extension that creates them. The extension must hold onto the webview returned from <code>createWebviewPanel</code>. If your extension loses this reference, it cannot regain access to that webview again, even though the webview will continue to show in VS Code.</p> <p>As with text editors, a user can also close a webview panel at any time. When a webview panel is closed by the user, the webview itself is destroyed. Attempting to use a destroyed webview throws an exception. This means that the example above using <code>setInterval</code> actually has an important bug: if the user closes the panel, <code>setInterval</code> will continue to fire, which will try to update <code>panel.webview.html</code>, which of course will throw an exception. Cats hate exceptions. Let's fix this!</p> <p>The <code>onDidDispose</code> event is fired when a webview is destroyed. We can use this event to cancel further updates and clean up the webview's resources:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cats <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'Coding Cat'</span><span class="token punctuation">:</span> <span class="token string">'https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif'</span><span class="token punctuation">,</span>
  <span class="token string">'Compiling Cat'</span><span class="token punctuation">:</span> <span class="token string">'https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> iteration <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token function-variable function">updateWebview</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> cat <span class="token operator">=</span> iteration<span class="token operator">++</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">'Compiling Cat'</span> <span class="token punctuation">:</span> <span class="token string">'Coding Cat'</span><span class="token punctuation">;</span>
        panel<span class="token punctuation">.</span>title <span class="token operator">=</span> cat<span class="token punctuation">;</span>
        panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token function">updateWebview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>updateWebview<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      panel<span class="token punctuation">.</span><span class="token function">onDidDispose</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// When the panel is closed, cancel any future updates to the webview content</span>
          <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        context<span class="token punctuation">.</span>subscriptions
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Extensions can also programmatically close webviews by calling <code>dispose()</code> on them. If, for example, we wanted to restrict our cat's workday to five seconds:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span>cats<span class="token punctuation">[</span><span class="token string">'Coding Cat'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// After 5sec, pragmatically close the webview panel</span>
      <span class="token keyword">const</span> timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> panel<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      panel<span class="token punctuation">.</span><span class="token function">onDidDispose</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// Handle user closing panel before the 5sec have passed</span>
          <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        context<span class="token punctuation">.</span>subscriptions
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="visibility-and-moving"><a href="#visibility-and-moving" aria-hidden="true" class="header-anchor">#</a> Visibility and Moving</h3> <p>When a webview panel is moved into a background tab, it becomes hidden. It is not destroyed however. VS Code will automatically restore the webview's content from <code>webview.html</code> when the panel is brought to the foreground again:</p> <p><img src="images/webview/basics-restore.gif" alt="Webview content is automatically restored when the webview becomes visible again"></p> <p>The <code>.visible</code> property tells you if the webview panel is currently visible or not.</p> <p>Extensions can programmatically bring a webview panel to the foreground by calling <code>reveal()</code>. This method takes an optional target view column to show the panel in. A webview panel may only show in a single editor column at a time. Calling <code>reveal()</code> or dragging a webview panel to a new editor column moves the webview into that new column.</p> <p><img src="images/webview/basics-drag.gif" alt="Webviews are moved when you drag them between tabs"></p> <p>Let's update our extension to only allow a single webview to exist at a time. If the panel is in the background, then the <code>catCoding.start</code> command will bring it to the foreground:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Track currently webview panel</span>
  <span class="token keyword">let</span> currentPanel<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>WebviewPanel <span class="token operator">|</span> undefined <span class="token operator">=</span> undefined<span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> columnToShowIn <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor
        <span class="token operator">?</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<span class="token punctuation">.</span>viewColumn
        <span class="token punctuation">:</span> undefined<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPanel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// If we already have a panel, show it in the target column</span>
        currentPanel<span class="token punctuation">.</span><span class="token function">reveal</span><span class="token punctuation">(</span>columnToShowIn<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Otherwise, create a new panel</span>
        currentPanel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
          <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
          <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
          columnToShowIn<span class="token punctuation">,</span>
          <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentPanel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span>cats<span class="token punctuation">[</span><span class="token string">'Coding Cat'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Reset when the current panel is closed</span>
        currentPanel<span class="token punctuation">.</span><span class="token function">onDidDispose</span><span class="token punctuation">(</span>
          <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            currentPanel <span class="token operator">=</span> undefined<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token keyword">null</span><span class="token punctuation">,</span>
          context<span class="token punctuation">.</span>subscriptions
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here's the new extension in action:</p> <p><img src="images/webview/basics-single_panel.gif" alt="Using a single panel and reveal"></p> <p>Whenever a webview's visibility changes, or when a webview is moved into a new column, the <code>onDidChangeViewState</code> event is fired. Our extension can use this event to change cats based on which column the webview is showing in:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> cats <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'Coding Cat'</span><span class="token punctuation">:</span> <span class="token string">'https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif'</span><span class="token punctuation">,</span>
  <span class="token string">'Compiling Cat'</span><span class="token punctuation">:</span> <span class="token string">'https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif'</span><span class="token punctuation">,</span>
  <span class="token string">'Testing Cat'</span><span class="token punctuation">:</span> <span class="token string">'https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span>cats<span class="token punctuation">[</span><span class="token string">'Coding Cat'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Update contents based on view state changes</span>
      panel<span class="token punctuation">.</span><span class="token function">onDidChangeViewState</span><span class="token punctuation">(</span>
        <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> panel <span class="token operator">=</span> e<span class="token punctuation">.</span>webviewPanel<span class="token punctuation">;</span>
          <span class="token keyword">switch</span> <span class="token punctuation">(</span>panel<span class="token punctuation">.</span>viewColumn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">:</span>
              <span class="token function">updateWebviewForCat</span><span class="token punctuation">(</span>panel<span class="token punctuation">,</span> <span class="token string">'Coding Cat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span><span class="token punctuation">;</span>

            <span class="token keyword">case</span> vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>Two<span class="token punctuation">:</span>
              <span class="token function">updateWebviewForCat</span><span class="token punctuation">(</span>panel<span class="token punctuation">,</span> <span class="token string">'Compiling Cat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span><span class="token punctuation">;</span>

            <span class="token keyword">case</span> vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>Three<span class="token punctuation">:</span>
              <span class="token function">updateWebviewForCat</span><span class="token punctuation">(</span>panel<span class="token punctuation">,</span> <span class="token string">'Testing Cat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        context<span class="token punctuation">.</span>subscriptions
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">updateWebviewForCat</span><span class="token punctuation">(</span><span class="token parameter">panel<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>WebviewPanel<span class="token punctuation">,</span> catName<span class="token punctuation">:</span> <span class="token keyword">keyof</span> <span class="token keyword">typeof</span> cats</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  panel<span class="token punctuation">.</span>title <span class="token operator">=</span> catName<span class="token punctuation">;</span>
  panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span>cats<span class="token punctuation">[</span>catName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="images/webview/basics-ondidchangeviewstate.gif" alt="Responding to onDidChangeViewState events"></p> <h3 id="inspecting-and-debugging-webviews"><a href="#inspecting-and-debugging-webviews" aria-hidden="true" class="header-anchor">#</a> Inspecting and debugging webviews</h3> <p>The <strong>Developer: Open Webview Developer Tools</strong> VS Code command lets you debug webviews. Running the command launches an instance of Developer Tools for any currently visible webviews:</p> <p><img src="images/webview/basics-developer_tools.png" alt="Webview Developer Tools"></p> <p>The contents of the webview are within an iframe inside the webview document. You can use Developer Tools to inspect and modify the webview's DOM, and debug scripts running within the webview itself.</p> <p>If you use the webview Developer Tools console, make sure to select the <strong>active frame</strong> environment from the drop-down in the top left corner of the Console panel:</p> <p><img src="images/webview/debug-active-frame.png" alt="Selecting the active frame"></p> <p>The <strong>active frame</strong> environment is where the webview scripts themselves are executed.</p> <p>In addition, the <strong>Developer: Reload Webview</strong> command reloads all active webviews. This can be helpful if you need to reset a webview's state, or if some webview content on disk has changed and you want the new content to be loaded.</p> <h2 id="loading-local-content"><a href="#loading-local-content" aria-hidden="true" class="header-anchor">#</a> Loading local content</h2> <p>Webviews run in isolated contexts that cannot directly access local resources. This is done for security reasons. This means that in order to load images, stylesheets, and other resources from your extension, or to load any content from the user's current workspace, you must use the <code>Webview.asWebviewUri</code> function to convert a local <code>file:</code> URI into a special URI that VS Code can use to load a subset of local resources.</p> <p>Imagine that we want to start bundling the cat gifs into our extension rather pulling them from Giphy. To do this, we first create a URI to the file on disk and then pass these URIs through the <code>asWebviewUri</code> function:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Get path to resource on disk</span>
      <span class="token keyword">const</span> onDiskPath <span class="token operator">=</span> vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>
        path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>extensionPath<span class="token punctuation">,</span> <span class="token string">'media'</span><span class="token punctuation">,</span> <span class="token string">'cat.gif'</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// And get the special URI to use with the webview</span>
      <span class="token keyword">const</span> catGifSrc <span class="token operator">=</span> panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">asWebviewUri</span><span class="token punctuation">(</span>onDiskPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span>catGifSrc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If we debug this code, we'd see that the actual value for <code>catGifSrc</code> is something like:</p> <div class="language- extra-class"><pre class="language-text"><code>vscode-resource:/Users/toonces/projects/vscode-cat-coding/media/cat.gif
</code></pre></div><p>VS Code understands this special URI and will use it to load our gif from the disk!</p> <p>By default, webviews can only access resources in the following locations:</p> <ul><li>Within your extension's install directory.</li> <li>Within the user's currently active workspace.</li></ul> <p>Use the <code>WebviewOptions.localResourceRoots</code> to allow access to additional local resources.</p> <p>You can also always use data URIs to embed resources directly within the webview.</p> <h3 id="controlling-access-to-local-resources"><a href="#controlling-access-to-local-resources" aria-hidden="true" class="header-anchor">#</a> Controlling access to local resources</h3> <p>Webviews can control which resources can be loaded from the user's machine with <code>localResourceRoots</code> option. <code>localResourceRoots</code> defines a set of root URIs from which local content may be loaded.</p> <p>We can use <code>localResourceRoots</code> to restrict <strong>Cat Coding</strong> webviews to only load resources from a <code>media</code> directory in our extension:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// Only allow the webview to access resources in our extension's media directory</span>
          localResourceRoots<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>extensionPath<span class="token punctuation">,</span> <span class="token string">'media'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> onDiskPath <span class="token operator">=</span> vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>
        path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>extensionPath<span class="token punctuation">,</span> <span class="token string">'media'</span><span class="token punctuation">,</span> <span class="token string">'cat.gif'</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> catGifSrc <span class="token operator">=</span> panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">asWebviewUri</span><span class="token punctuation">(</span>onDiskPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span>catGifSrc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To disallow all local resources, just set <code>localResourceRoots</code> to <code>[]</code>.</p> <p>In general, webviews should be as restrictive as possible in loading local resources. However, keep in mind that <code>localResourceRoots</code> does not offer complete security protection on its own. Make sure your webview also follows <a href="#security">security best practices</a>, and add a <a href="#content-security-policy">content security policy</a> to further restrict the content that can be loaded.</p> <h3 id="theming-webview-content"><a href="#theming-webview-content" aria-hidden="true" class="header-anchor">#</a> Theming webview content</h3> <p>Webview can use CSS to change their appearance based on VS Code's current theme. VS Code groups themes into three categories, and adds a special class to the <code>body</code> element to indicate the current theme:</p> <ul><li><code>vscode-light</code> - Light themes.</li> <li><code>vscode-dark</code> - Dark themes.</li> <li><code>vscode-high-contrast</code> - High contrast themes.</li></ul> <p>The following CSS changes the text color of the webview based on the user's current theme:</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body.vscode-light</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body.vscode-dark</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body.vscode-high-contrast</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When developing a webview application, make sure that it works for the three types of themes. And always test your webview in high-contrast mode to make sure it will be usable by people with visual disabilities.</p> <p>Webviews can also access VS Code theme colors using <a href="https://developer.mozilla.org/docs/Web/CSS/Using_CSS_variables" target="_blank" rel="noopener noreferrer">CSS variables<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. These variable names are prefixed with <code>vscode</code> and replace the <code>.</code> with <code>-</code>. For example <code>editor.foreground</code> becomes <code>var(--vscode-editor-foreground)</code>:</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">code</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--vscode-editor-foreground<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Review the <a href="/api/references/theme-color">Theme Color Reference</a> for the available theme variables.</p> <p>The following font related variables are also defined:</p> <ul><li><code>--vscode-editor-font-family</code> - Editor font family (from the <code>editor.fontFamily</code> setting).</li> <li><code>--vscode-editor-font-weight</code> - Editor font weight (from the <code>editor.fontWeight</code> setting).</li> <li><code>--vscode-editor-font-size</code> - Editor font size (from the <code>editor.fontWeight</code> setting).</li></ul> <h2 id="scripts-and-message-passing"><a href="#scripts-and-message-passing" aria-hidden="true" class="header-anchor">#</a> Scripts and message passing</h2> <p>Webviews are just like iframes, which means that they can also run scripts. JavaScript is disabled in webviews by default, but it can easily re-enable by passing in the <code>enableScripts: true</code> option.</p> <p>Let's use a script to add a counter tracking the lines of source code our cat has written. Running a basic script is pretty simple, but note that this example is only for demonstration purposes. In practice, your webview should always disable inline scripts using a <a href="#content-security-policy">content security policy</a>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// Enable scripts in the webview</span>
          enableScripts<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Cat Coding&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;
    &lt;h1 id=&quot;lines-of-code-counter&quot;&gt;0&lt;/h1&gt;

    &lt;script&gt;
        const counter = document.getElementById('lines-of-code-counter');

        let count = 0;
        setInterval(() =&gt; {
            counter.textContent = count++;
        }, 100);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="images/webview/scripts-basic.gif" alt="A script running in a webview"></p> <p>Wow! that's one productive cat.</p> <p>Webview scripts can do just about anything that a script on a normal webpage can. Keep in mind though that webviews exist in their own context, so scripts in a webview do not have access to the VS Code API. That's where message passing comes in!</p> <h3 id="passing-messages-from-an-extension-to-a-webview"><a href="#passing-messages-from-an-extension-to-a-webview" aria-hidden="true" class="header-anchor">#</a> Passing messages from an extension to a webview</h3> <p>An extension can send data to its webviews using <code>webview.postMessage()</code>. This method sends any JSON serializable data to the webview. The message is received inside the webview through the standard <code>message</code> event.</p> <p>To demonstrate this, let's add a new command to <strong>Cat Coding</strong> that instructs the currently coding cat to refactor their code (thereby reducing the total number of lines). The new <code>catCoding.doRefactor</code> command use <code>postMessage</code> to send the instruction to the current webview, and <code>window.addEventListener('message', event =&gt; { ... })</code> inside the webview itself to handle the message:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Only allow a single Cat Coder</span>
  <span class="token keyword">let</span> currentPanel<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>WebviewPanel <span class="token operator">|</span> undefined <span class="token operator">=</span> undefined<span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPanel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        currentPanel<span class="token punctuation">.</span><span class="token function">reveal</span><span class="token punctuation">(</span>vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        currentPanel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
          <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
          <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
          vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            enableScripts<span class="token punctuation">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentPanel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentPanel<span class="token punctuation">.</span><span class="token function">onDidDispose</span><span class="token punctuation">(</span>
          <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            currentPanel <span class="token operator">=</span> undefined<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          undefined<span class="token punctuation">,</span>
          context<span class="token punctuation">.</span>subscriptions
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Our new command</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.doRefactor'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentPanel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Send a message to our webview.</span>
      <span class="token comment">// You can send any JSON serializable data.</span>
      currentPanel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> command<span class="token punctuation">:</span> <span class="token string">'refactor'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Cat Coding&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;
    &lt;h1 id=&quot;lines-of-code-counter&quot;&gt;0&lt;/h1&gt;

    &lt;script&gt;
        const counter = document.getElementById('lines-of-code-counter');

        let count = 0;
        setInterval(() =&gt; {
            counter.textContent = count++;
        }, 100);

        // Handle the message inside the webview
        window.addEventListener('message', event =&gt; {

            const message = event.data; // The JSON data our extension sent

            switch (message.command) {
                case 'refactor':
                    count = Math.ceil(count * 0.5);
                    counter.textContent = count;
                    break;
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="images/webview/scripts-extension_to_webview.gif" alt="Passing messages to a webview"></p> <h3 id="passing-messages-from-a-webview-to-an-extension"><a href="#passing-messages-from-a-webview-to-an-extension" aria-hidden="true" class="header-anchor">#</a> Passing messages from a webview to an extension</h3> <p>Webviews can also pass messages back to their extension. This is accomplished using a <code>postMessage</code> function on a special VS Code API object inside the webview. To access the VS Code API object, call <code>acquireVsCodeApi</code> inside the webview. This function can only be invoked once per session. You must hang onto the instance of the VS Code API returned by this method, and hand it out to any other functions that wish to use it.</p> <p>We can use the VS Code API and <code>postMessage</code> in our <strong>Cat Coding</strong> webview to alert the extension when our cat introduces a bug in their code:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          enableScripts<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Handle messages from the webview</span>
      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span><span class="token function">onDidReceiveMessage</span><span class="token punctuation">(</span>
        <span class="token parameter">message</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">switch</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>command<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'alert'</span><span class="token punctuation">:</span>
              vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showErrorMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        context<span class="token punctuation">.</span>subscriptions
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Cat Coding&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;
    &lt;h1 id=&quot;lines-of-code-counter&quot;&gt;0&lt;/h1&gt;

    &lt;script&gt;
        (function() {
            const vscode = acquireVsCodeApi();
            const counter = document.getElementById('lines-of-code-counter');

            let count = 0;
            setInterval(() =&gt; {
                counter.textContent = count++;

                // Alert the extension when our cat introduces a bug
                if (Math.random() &lt; 0.001 * count) {
                    vscode.postMessage({
                        command: 'alert',
                        text: '🐛  on line ' + count
                    })
                }
            }, 100);
        }())
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="images/webview/scripts-webview_to_extension.gif" alt="Passing messages from the webview to the main extension"></p> <p>For security reasons, you must keep the VS Code API object private and make sure it is never leaked into the global state.</p> <h2 id="security"><a href="#security" aria-hidden="true" class="header-anchor">#</a> Security</h2> <p>As with any webpage, when creating a webview you must follow some basic security best practices.</p> <h3 id="limit-capabilities"><a href="#limit-capabilities" aria-hidden="true" class="header-anchor">#</a> Limit capabilities</h3> <p>A webview should have the minimum set of capabilities that it needs. For example, if your webview does not need to run scripts, do not set the <code>enableScripts: true</code>. If your webview does not need to load resources from the user's workspace, set <code>localResourceRoots</code> to <code>[vscode.Uri.file(extensionContext.extensionPath)]</code> or even <code>[]</code> to disallow access to all local resources.</p> <h3 id="content-security-policy"><a href="#content-security-policy" aria-hidden="true" class="header-anchor">#</a> Content security policy</h3> <p><a href="https://developers.google.com/web/fundamentals/security/csp/" target="_blank" rel="noopener noreferrer">Content security policies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> further restrict the content that can be loaded and executed in webviews. For example, a content security policy can make sure that only a list of allowed scripts can be run in the webview, or even tell the webview to only load images over <code>https</code>.</p> <p>To add a content security policy, put a <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code> directive at the top of the webview's <code>&lt;head&gt;</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;

    &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src 'none';&quot;&gt;

    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;

    &lt;title&gt;Cat Coding&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    ...
&lt;/body&gt;
&lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The policy <code>default-src 'none';</code> disallows all content. We can then turn back on the minimal amount of content that our extension needs to function. Here's a content security policy that allows loading local scripts and stylesheets, and loading images over <code>https</code>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>default-src 'none'; img-src ${webview.cspSource} https:; script-src ${webview.cspSource}; style-src ${webview.cspSource};<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>The <code>${webview.cspSource}</code> value is a placeholder for a value that comes from the webview object itself. See the <a href="https://github.com/Microsoft/vscode-extension-samples/blob/master/webview-sample" target="_blank" rel="noopener noreferrer">webview sample<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for a complete example of how to use this value.</p> <p>This content security policy also implicitly disables inline scripts and styles. It is a best practice to extract all inline styles and scripts to external files so that they can be properly loaded without relaxing the content security policy.</p> <h3 id="only-load-content-over-https"><a href="#only-load-content-over-https" aria-hidden="true" class="header-anchor">#</a> Only load content over https</h3> <p>If your webview allows loading external resources, it is strongly recommended that you only allow these resources to be loaded over <code>https</code> and not over http. The example content security policy above already does this by only allowing images to be loaded over <code>https:</code>.</p> <h3 id="sanitize-all-user-input"><a href="#sanitize-all-user-input" aria-hidden="true" class="header-anchor">#</a> Sanitize all user input</h3> <p>Just as you would for a normal webpage, when constructing the HTML for a webview, you must sanitize all user input. Failing to properly sanitize input can allow content injections, which may open your users up to a security risk.</p> <p>Example values that must be sanitized:</p> <ul><li>File contents.</li> <li>File and folder paths.</li> <li>User and workspace settings.</li></ul> <p>Consider using a helper library to construct your HTML strings, or at least ensure that all content from the user's workspace is properly sanitized.</p> <p>Never rely on sanitization alone for security. Make sure to follow the other security best practices, such as having a <a href="#content-security-policy">content security policy</a> to minimize the impact of any potential content injections.</p> <h2 id="persistence"><a href="#persistence" aria-hidden="true" class="header-anchor">#</a> Persistence</h2> <p>In the standard webview <a href="#lifecycle">lifecycle</a>, webviews are created by <code>createWebviewPanel</code> and destroyed when the user closes them or when <code>.dispose()</code> is called. The contents of webviews however are created when the webview becomes visible and destroyed when the webview is moved into the background. Any state inside the webview will be lost when the webview is moved to a background tab.</p> <p>The best way to solve this is to make your webview stateless. Use <a href="#passing-messages-from-a-webview-to-an-extension">message passing</a> to save off the webview's state and then restore the state when the webview becomes visible again.</p> <h3 id="getstate-and-setstate"><a href="#getstate-and-setstate" aria-hidden="true" class="header-anchor">#</a> getState and setState</h3> <p>Scripts running inside a webview can use the <code>getState</code> and <code>setState</code> methods to save off and restore a JSON serializable state object. This state is persisted even the webview content itself is destroyed when a webview panel becomes hidden. The state is destroyed when the webview panel is destroyed.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Inside a webview script</span>
<span class="token keyword">const</span> vscode <span class="token operator">=</span> <span class="token function">acquireVsCodeApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'lines-of-code-counter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Check if we have an old state to restore from</span>
<span class="token keyword">const</span> previousState <span class="token operator">=</span> vscode<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> previousState <span class="token operator">?</span> previousState<span class="token punctuation">.</span>count <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
counter<span class="token punctuation">.</span>textContent <span class="token operator">=</span> count<span class="token punctuation">;</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  counter<span class="token punctuation">.</span>textContent <span class="token operator">=</span> count<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token comment">// Update the saved state</span>
  vscode<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>getState</code> and <code>setState</code> are the preferred way to persist state, as they have much lower performance overhead than <code>retainContextWhenHidden</code>.</p> <h3 id="serialization"><a href="#serialization" aria-hidden="true" class="header-anchor">#</a> Serialization</h3> <p>By implementing a <code>WebviewPanelSerializer</code>, your webviews can be automatically restored when VS Code restarts. Serialization builds on <code>getState</code> and <code>setState</code>, and is only enabled if your extension registers a <code>WebviewPanelSerializer</code> for your webviews.</p> <p>To make our coding cats persist across VS Code restarts, first add a <code>onWebviewPanel</code> activation event to the extension's <code>package.json</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    ...<span class="token punctuation">,</span>
    <span class="token string">&quot;onWebviewPanel:catCoding&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><p>This activation event ensures that our extension will be activated whenever VS Code needs to restore a webview with the viewType: <code>catCoding</code>.</p> <p>Then, in our extension's <code>activate</code> method, call <code>registerWebviewPanelSerializer</code> to register a new <code>WebviewPanelSerializer</code>. The <code>WebviewPanelSerializer</code> is responsible for restoring the contents of the webview from its persisted state. This state is the JSON blob that the webview contents set using <code>setState</code>.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Normal setup...</span>

  <span class="token comment">// And make sure we register a serializer for our webview type</span>
  vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">registerWebviewPanelSerializer</span><span class="token punctuation">(</span><span class="token string">'catCoding'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CatCodingSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CatCodingSerializer</span> <span class="token keyword">implements</span> <span class="token class-name">vscode<span class="token punctuation">.</span>WebviewPanelSerializer</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">deserializeWebviewPanel</span><span class="token punctuation">(</span><span class="token parameter">webviewPanel<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>WebviewPanel<span class="token punctuation">,</span> state<span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// `state` is the state persisted using `setState` inside the webview</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got state: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>state<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Restore the content of our webview.</span>
    <span class="token comment">//</span>
    <span class="token comment">// Make sure we hold on to the `webviewPanel` passed in here and</span>
    <span class="token comment">// also restore any event listeners we need on it.</span>
    webviewPanel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now if you restart VS Code with a cat coding panel open, the panel will be automatically restored in the same editor position.</p> <h3 id="retaincontextwhenhidden"><a href="#retaincontextwhenhidden" aria-hidden="true" class="header-anchor">#</a> retainContextWhenHidden</h3> <p>For webviews with very complex UI or state that cannot be quickly saved and restored, you can instead use the <code>retainContextWhenHidden</code> option. This option makes a webview keep its content around but in a hidden state, even when the webview itself is no longer in the foreground.</p> <p>Although <strong>Cat Coding</strong> can hardly be said to have complex state, let's try enabling <code>retainContextWhenHidden</code> to see how the option changes a webview's behavior:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'catCoding.start'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> panel <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createWebviewPanel</span><span class="token punctuation">(</span>
        <span class="token string">'catCoding'</span><span class="token punctuation">,</span>
        <span class="token string">'Cat Coding'</span><span class="token punctuation">,</span>
        vscode<span class="token punctuation">.</span>ViewColumn<span class="token punctuation">.</span>One<span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          enableScripts<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          retainContextWhenHidden<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      panel<span class="token punctuation">.</span>webview<span class="token punctuation">.</span>html <span class="token operator">=</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getWebviewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Cat Coding&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;
    &lt;h1 id=&quot;lines-of-code-counter&quot;&gt;0&lt;/h1&gt;

    &lt;script&gt;
        const counter = document.getElementById('lines-of-code-counter');

        let count = 0;
        setInterval(() =&gt; {
            counter.textContent = count++;
        }, 100);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="images/webview/persistence-retrain.gif" alt="persistence retrain"></p> <p>Notice how the counter does not reset now when the webview is hidden and then restored. No extra code required! With <code>retainContextWhenHidden</code>, the webview acts similarly to a background tab in a web browser. Scripts and other dynamic content are suspended, but immediately resumed once the webview becomes visible again. You cannot send messages to a hidden webview, even when <code>retainContextWhenHidden</code> is enabled.</p> <p>Although <code>retainContextWhenHidden</code> may be appealing, keep in mind that this has high memory overhead and should only be used when other persistence techniques will not work.</p> <h2 id="next-steps"><a href="#next-steps" aria-hidden="true" class="header-anchor">#</a> Next steps</h2> <p>If you'd like to learn more about VS Code extensibility, try these topics:</p> <ul><li><a href="/api">Extension API</a> - Learn about the full VS Code Extension API.</li> <li><a href="/api/extension-capabilities/overview">Extension Capabilities</a> - Take a look at other ways to extend VS Code.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/vscode-doc-zh/assets/js/app.79cc50a5.js" defer></script><script src="/vscode-doc-zh/assets/js/2.6081b710.js" defer></script><script src="/vscode-doc-zh/assets/js/30.6c266e85.js" defer></script>
  </body>
</html>
