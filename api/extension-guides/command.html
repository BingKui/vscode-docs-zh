<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Commands | Hello VuePress</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/vscode-doc-zh/assets/css/0.styles.0c09eec2.css" as="style"><link rel="preload" href="/vscode-doc-zh/assets/js/app.79cc50a5.js" as="script"><link rel="preload" href="/vscode-doc-zh/assets/js/2.6081b710.js" as="script"><link rel="preload" href="/vscode-doc-zh/assets/js/16.27611e97.js" as="script"><link rel="prefetch" href="/vscode-doc-zh/assets/js/10.dcf0234a.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/11.3443e88c.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/12.33618473.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/13.f5bcdba3.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/14.069ed78b.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/15.8ad5337f.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/17.ae2dc47b.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/18.4a6eb331.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/19.17a60d3f.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/20.7de46031.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/21.84669414.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/22.9afacd9c.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/23.f216dfdc.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/24.0cc96f6f.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/25.be98c8b0.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/26.9406d5cd.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/27.c82f8665.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/28.14ff35c2.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/29.0b9194ef.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/3.3c269ca0.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/30.6c266e85.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/31.71b1efc9.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/32.a260662e.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/33.ebd1b0e9.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/34.8c89ccc9.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/35.8c56c023.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/36.bb77a714.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/37.fff25a6d.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/38.c898d862.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/39.2754f4ea.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/4.8ce84c45.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/40.08340174.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/41.022c4327.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/42.a6524d2e.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/43.8f0dd455.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/44.b23d9f65.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/45.04fcf627.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/46.789e9716.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/47.33d6f209.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/48.135250ff.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/49.3d6d3bb5.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/5.62e47b4c.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/50.44990f04.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/51.6ca0374b.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/52.eb83c9e0.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/53.9a022f02.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/54.7da689eb.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/55.25e75232.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/6.83a6b4a3.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/7.eefd45de.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/8.aa200fb5.js"><link rel="prefetch" href="/vscode-doc-zh/assets/js/9.6259a5ab.js">
    <link rel="stylesheet" href="/vscode-doc-zh/assets/css/0.styles.0c09eec2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-navbar"><!----> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/vscode-doc-zh/" class="sidebar-link">首页</a></li><li><a href="/vscode-doc-zh/api/" class="sidebar-link">扩展 API</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="commands"><a href="#commands" aria-hidden="true" class="header-anchor">#</a> Commands</h1> <p>Commands trigger actions in Visual Studio Code. If you have ever <a href="/docs/getstarted/keybindings">configured a keybinding</a>, then you've worked with commands. Commands are also used by extensions to expose functionality to users, bind to actions in VS Code's UI, and implement internal logic.</p> <h2 id="using-commands"><a href="#using-commands" aria-hidden="true" class="header-anchor">#</a> Using Commands</h2> <p>VS Code includes a large set of <a href="/api/references/commands">built-in commands</a> that you can use to interact with the editor, control the user interface, or perform background operations. Many extensions also expose their core functionality as commands that users and other extensions can leverage.</p> <h3 id="programmatically-executing-a-command"><a href="#programmatically-executing-a-command" aria-hidden="true" class="header-anchor">#</a> Programmatically executing a command</h3> <p>The <a href="/api/references/vscode-api#commands.executeCommand"><code>vscode.commands.executeCommand</code></a> API programmatically executes a command. This lets you leverage VS Code's built-in functionality, and build on extensions such as VS Code's built-in Git and Markdown extensions.</p> <p>The <code>editor.action.addCommentLine</code> command, for example, comments the currently selected lines in the active text editor:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">commentLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">executeCommand</span><span class="token punctuation">(</span><span class="token string">'editor.action.addCommentLine'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Some commands take arguments that control their behavior. Commands may also return a result. The API-like <code>vscode.executeDefinitionProvider</code> command, for example, queries a document for definitions at a given position. It takes a document URI and a position as arguments, and returns a promise with a list of definitions:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">printDefinitionsForActiveEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> activeEditor <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeEditor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> definitions <span class="token operator">=</span> <span class="token keyword">await</span> vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span>executeCommand<span class="token operator">&lt;</span>vscode<span class="token punctuation">.</span>Location<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
    <span class="token string">'vscode.executeDefinitionProvider'</span><span class="token punctuation">,</span>
    activeEditor<span class="token punctuation">.</span>document<span class="token punctuation">.</span>uri<span class="token punctuation">,</span>
    activeEditor<span class="token punctuation">.</span>selection<span class="token punctuation">.</span>active
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> definition <span class="token keyword">of</span> definitions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>definition<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To find available commands:</p> <ul><li><a href="/docs/getstarted/keybindings">Browse the keyboard shortcuts</a></li> <li><a href="/api/references/commands">Look through VS Code's built-in advanced commands api</a></li></ul> <h3 id="command-uris"><a href="#command-uris" aria-hidden="true" class="header-anchor">#</a> Command URIs</h3> <p>Commands URIs are links that execute a given command. They can be used as clickable links in hover text, completion item details, or inside of webviews.</p> <p>A command URI uses the <code>command</code> scheme followed by the command name. The command URI for the <code>editor.action.addCommentLine</code> command, for example, is <code>command:editor.action.addCommentLine</code>. Here's a hover provider that shows a link in the comments of the current line in the active text editor:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vscode<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">registerHoverProvider</span><span class="token punctuation">(</span>
    <span class="token string">'javascript'</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">class</span> <span class="token keyword">implements</span> <span class="token class-name">vscode<span class="token punctuation">.</span>HoverProvider</span> <span class="token punctuation">{</span>
      <span class="token function">provideHover</span><span class="token punctuation">(</span>
        _document<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>TextDocument<span class="token punctuation">,</span>
        _position<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>Position<span class="token punctuation">,</span>
        _token<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>CancellationToken
      <span class="token punctuation">)</span><span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ProviderResult<span class="token operator">&lt;</span>vscode<span class="token punctuation">.</span>Hover<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> commentCommandUri <span class="token operator">=</span> vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">command:editor.action.addCommentLine</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>MarkdownString</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[Add comment](</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commentCommandUri<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// To enable command URIs in Markdown content, you must set the `isTrusted` flag.</span>
        <span class="token comment">// When creating trusted Markdown string, make sure to properly sanitize all the</span>
        <span class="token comment">// input content so that only expected command URIs can be executed</span>
        contents<span class="token punctuation">.</span>isTrusted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>Hover</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The list of arguments to the command is passed as a JSON array that has been properly URI encoded: The example below uses the <code>git.stage</code> command to create a hover like that stages the current file:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vscode<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">registerHoverProvider</span><span class="token punctuation">(</span>
    <span class="token string">'javascript'</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">class</span> <span class="token keyword">implements</span> <span class="token class-name">vscode<span class="token punctuation">.</span>HoverProvider</span> <span class="token punctuation">{</span>
      <span class="token function">provideHover</span><span class="token punctuation">(</span>
        document<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>TextDocument<span class="token punctuation">,</span>
        _position<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>Position<span class="token punctuation">,</span>
        _token<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>CancellationToken
      <span class="token punctuation">)</span><span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ProviderResult<span class="token operator">&lt;</span>vscode<span class="token punctuation">.</span>Hover<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> resourceUri<span class="token punctuation">:</span> document<span class="token punctuation">.</span>uri <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> stageCommandUri <span class="token operator">=</span> vscode<span class="token punctuation">.</span>Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">command:git.stage?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>MarkdownString</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[Stage file](</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>stageCommandUri<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        contents<span class="token punctuation">.</span>isTrusted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>Hover</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="creating-new-commands"><a href="#creating-new-commands" aria-hidden="true" class="header-anchor">#</a> Creating new commands</h2> <h3 id="registering-a-command"><a href="#registering-a-command" aria-hidden="true" class="header-anchor">#</a> Registering a command</h3> <p><a href="/api/references/vscode-api#commands.registerCommand"><code>vscode.commands.registerCommand</code></a> binds a command id to a handler function in your extension:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">'vscode'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> command <span class="token operator">=</span> <span class="token string">'myExtension.sayHello'</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> commandHandler <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!!!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span>command<span class="token punctuation">,</span> commandHandler<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The handler function will be invoked whenever the <code>myExtension.sayHello</code> command is executed, be it programmatically with <code>executeCommand</code>, from the VS Code UI, or through a keybinding.</p> <h3 id="creating-a-user-facing-command"><a href="#creating-a-user-facing-command" aria-hidden="true" class="header-anchor">#</a> Creating a user facing command</h3> <p><code>vscode.commands.registerCommand</code> only binds a command id to a handler function. To expose this command in the Command Palette so it is discoverable by users, you also need a corresponding command <code>contribution</code> in your extension's <code>package.json</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;myExtension.sayHello&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Say Hello&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>commands</code> contribution tells VS Code that your extension provides a given command, and also lets you control how the command is displayed in the UI. Now our command will show up in the Command Palette:</p> <p><img src="images/commands/palette.png" alt="The contributed command in the Command Palette"></p> <p>We still need to call <code>registerCommand</code> to actually tie the command id to the handler. This means that if the user selects the <code>myExtension.sayHello</code> command from the Command Palette but our extension has not been activated yet, nothing will happen. To prevent this, extensions must register an <code>onCommand</code> <code>activationEvent</code> for all user facing commands:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;onCommand:myExtension.sayHello&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now when a user first invokes the <code>myExtension.sayHello</code> command from the Command Palette or through a keybinding, the extension will be activated and <code>registerCommand</code> will bind <code>myExtension.sayHello</code> to the proper handler.</p> <p>You do not need an <code>onCommand</code> activation event for internal commands but you must define them for any commands that:</p> <ul><li>Can be invoked using the Command Palette.</li> <li>Can be invoked using a keybinding.</li> <li>Can be invoked through the VS Code UI, such as through the editor title bar.</li> <li>Is intended as an API for other extensions to consume.</li></ul> <h3 id="controlling-when-a-command-shows-up-in-the-command-palette"><a href="#controlling-when-a-command-shows-up-in-the-command-palette" aria-hidden="true" class="header-anchor">#</a> Controlling when a command shows up in the Command Palette</h3> <p>By default, all user facing commands contributed through the <code>commands</code> section of the <code>package.json</code> show up in the Command Palette. However, many commands are only relevant in certain circumstances, such as when there is an active text editor of a given language or when the user has a certain configuration option set.</p> <p>The <a href="/api/references/contribution-points#contributes.menus"><code>menus.commandPalette</code></a> contribution point lets you restrict when a command should show in the Command Palette. It takes the id of the target command and a <a href="/docs/getstarted/keybindings#_when-clause-contexts">when clause</a> that controls when the command is shown:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;menus&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;commandPalette&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;myExtension.sayHello&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;when&quot;</span><span class="token operator">:</span> <span class="token string">&quot;editorLangId == markdown&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now the <code>myExtension.sayHello</code> command will only show up in the Command Palette when the user is in a Markdown file.</p> <h3 id="enablement-of-commands"><a href="#enablement-of-commands" aria-hidden="true" class="header-anchor">#</a> Enablement of commands</h3> <p>Commands support enablement via an <code>enablement</code> property - its value is a <a href="/docs/getstarted/keybindings#_when-clause-contexts">when-clause</a>. Enablement applies to all menus and to registered keybindings.</p> <blockquote><p><strong>Note</strong>: There is semantic overlap between <code>enablement</code> and the <code>when</code> condition of menu items. The latter is used to prevent menus full of disabled items. For example, a command that analyzes a JavaScript regular expression should show <strong>when</strong> the file is JavaScript and be <strong>enabled</strong> only when the cursor is over a regular expression. The <code>when</code> clause prevents clutter, by not showing the command for all other language files. Preventing cluttered menus is highly recommended.</p></blockquote> <p>Last, menus showing commands, like the Command Palette or context menus, implement different ways of dealing with enablement. Editor and explorer context menus render enablement/disablement items while the Command Palette filters them.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/vscode-doc-zh/assets/js/app.79cc50a5.js" defer></script><script src="/vscode-doc-zh/assets/js/2.6081b710.js" defer></script><script src="/vscode-doc-zh/assets/js/16.27611e97.js" defer></script>
  </body>
</html>
