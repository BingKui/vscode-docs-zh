<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Continuous Integration | Vscode API 中文文档</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/assets/css/0.styles.454f99c0.css" as="style"><link rel="preload" href="/assets/js/app.69530766.js" as="script"><link rel="preload" href="/assets/js/2.6081b710.js" as="script"><link rel="preload" href="/assets/js/51.2a2a5129.js" as="script"><link rel="prefetch" href="/assets/js/10.00c1caf2.js"><link rel="prefetch" href="/assets/js/11.22f75b2f.js"><link rel="prefetch" href="/assets/js/12.33618473.js"><link rel="prefetch" href="/assets/js/13.f5bcdba3.js"><link rel="prefetch" href="/assets/js/14.069ed78b.js"><link rel="prefetch" href="/assets/js/15.8ad5337f.js"><link rel="prefetch" href="/assets/js/16.27611e97.js"><link rel="prefetch" href="/assets/js/17.f0ee6d17.js"><link rel="prefetch" href="/assets/js/18.4a6eb331.js"><link rel="prefetch" href="/assets/js/19.43e4541f.js"><link rel="prefetch" href="/assets/js/20.7de46031.js"><link rel="prefetch" href="/assets/js/21.84669414.js"><link rel="prefetch" href="/assets/js/22.9afacd9c.js"><link rel="prefetch" href="/assets/js/23.f216dfdc.js"><link rel="prefetch" href="/assets/js/24.0cc96f6f.js"><link rel="prefetch" href="/assets/js/25.cbd514e8.js"><link rel="prefetch" href="/assets/js/26.7be766a8.js"><link rel="prefetch" href="/assets/js/27.c82f8665.js"><link rel="prefetch" href="/assets/js/28.14ff35c2.js"><link rel="prefetch" href="/assets/js/29.0b9194ef.js"><link rel="prefetch" href="/assets/js/3.3c269ca0.js"><link rel="prefetch" href="/assets/js/30.eb394ebe.js"><link rel="prefetch" href="/assets/js/31.71b1efc9.js"><link rel="prefetch" href="/assets/js/32.a260662e.js"><link rel="prefetch" href="/assets/js/33.ebd1b0e9.js"><link rel="prefetch" href="/assets/js/34.8c89ccc9.js"><link rel="prefetch" href="/assets/js/35.8c56c023.js"><link rel="prefetch" href="/assets/js/36.bb77a714.js"><link rel="prefetch" href="/assets/js/37.fff25a6d.js"><link rel="prefetch" href="/assets/js/38.c898d862.js"><link rel="prefetch" href="/assets/js/39.3c1938ed.js"><link rel="prefetch" href="/assets/js/4.8ce84c45.js"><link rel="prefetch" href="/assets/js/40.08340174.js"><link rel="prefetch" href="/assets/js/41.022c4327.js"><link rel="prefetch" href="/assets/js/42.a6524d2e.js"><link rel="prefetch" href="/assets/js/43.8f0dd455.js"><link rel="prefetch" href="/assets/js/44.b23d9f65.js"><link rel="prefetch" href="/assets/js/45.a30b757b.js"><link rel="prefetch" href="/assets/js/46.789e9716.js"><link rel="prefetch" href="/assets/js/47.33d6f209.js"><link rel="prefetch" href="/assets/js/48.135250ff.js"><link rel="prefetch" href="/assets/js/49.3d6d3bb5.js"><link rel="prefetch" href="/assets/js/5.62e47b4c.js"><link rel="prefetch" href="/assets/js/50.44990f04.js"><link rel="prefetch" href="/assets/js/52.3996bfd7.js"><link rel="prefetch" href="/assets/js/53.01d6e216.js"><link rel="prefetch" href="/assets/js/54.ec31b688.js"><link rel="prefetch" href="/assets/js/55.25e75232.js"><link rel="prefetch" href="/assets/js/6.83a6b4a3.js"><link rel="prefetch" href="/assets/js/7.1f83f4dc.js"><link rel="prefetch" href="/assets/js/8.db84d1e9.js"><link rel="prefetch" href="/assets/js/9.6259a5ab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.454f99c0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-navbar"><!----> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">首页</a></li><li><a href="/api/" class="sidebar-link">扩展 API</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="continuous-integration"><a href="#continuous-integration" aria-hidden="true" class="header-anchor">#</a> Continuous Integration</h1> <p>Extension integration tests can be run on CI services. The <a href="https://github.com/Microsoft/vscode-test" target="_blank" rel="noopener noreferrer"><code>vscode-test</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library helps you setup extension tests on CI providers and contains a <a href="https://github.com/microsoft/vscode-test/tree/master/sample" target="_blank" rel="noopener noreferrer">sample extension<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> setup on Azure Pipelines. You can check out the <a href="https://dev.azure.com/vscode/vscode-test/_build?definitionId=15" target="_blank" rel="noopener noreferrer">build pipeline<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or jump directly to the <a href="https://github.com/microsoft/vscode-test/blob/master/sample/azure-pipelines.yml" target="_blank" rel="noopener noreferrer"><code>azure-pipelines.yml</code> file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="azure-pipelines"><a href="#azure-pipelines" aria-hidden="true" class="header-anchor">#</a> Azure Pipelines</h2> <p><a href="https://azure.microsoft.com/services/devops/"><img alt="Azure Pipelines" src="/assets/api/working-with-extensions/continuous-integration/pipelines-logo.png" width="318"></a></p> <p><a href="https://azure.microsoft.com/services/devops/pipelines/" target="_blank" rel="noopener noreferrer">Azure Pipelines<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is great for running VS Code extension tests as it supports running the tests on Windows, macOS, and Linux. For Open Source projects, you get unlimited minutes and 10 free parallel jobs. This section explains how to setup an Azure Pipelines for running your extension tests.</p> <p>First, create a free account on <a href="https://azure.microsoft.com/services/devops/" target="_blank" rel="noopener noreferrer">Azure DevOps<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and create an <a href="https://azure.microsoft.com/features/devops-projects/" target="_blank" rel="noopener noreferrer">Azure DevOps project<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for your extension.</p> <p>Then, add the following <code>azure-pipelines.yml</code> file to the root of your extension's repository. Other than the <code>xvfb</code> setup script for Linux that is necessary to run VS Code in headless Linux CI machines, the definition is straight-forward:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">trigger</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> master

<span class="token key atrule">strategy</span><span class="token punctuation">:</span>
  <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
    <span class="token key atrule">linux</span><span class="token punctuation">:</span>
      <span class="token key atrule">imageName</span><span class="token punctuation">:</span> <span class="token string">'ubuntu-16.04'</span>
    <span class="token key atrule">mac</span><span class="token punctuation">:</span>
      <span class="token key atrule">imageName</span><span class="token punctuation">:</span> <span class="token string">'macos-10.13'</span>
    <span class="token key atrule">windows</span><span class="token punctuation">:</span>
      <span class="token key atrule">imageName</span><span class="token punctuation">:</span> <span class="token string">'vs2017-win2016'</span>

<span class="token key atrule">pool</span><span class="token punctuation">:</span>
  <span class="token key atrule">vmImage</span><span class="token punctuation">:</span> $(imageName)

<span class="token key atrule">steps</span><span class="token punctuation">:</span>

<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> NodeTool@0
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">versionSpec</span><span class="token punctuation">:</span> <span class="token string">'8.x'</span>
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> <span class="token string">'Install Node.js'</span>

<span class="token punctuation">-</span> <span class="token key atrule">bash</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    /usr/bin/Xvfb :99 -screen 0 1024x768x24 &gt; /dev/null 2&gt;&amp;1 &amp;
    echo &quot;&gt;&gt;&gt; Started xvfb&quot;</span>
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Start xvfb
  <span class="token key atrule">condition</span><span class="token punctuation">:</span> and(succeeded()<span class="token punctuation">,</span> eq(variables<span class="token punctuation">[</span><span class="token string">'Agent.OS'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 'Linux'))

<span class="token punctuation">-</span> <span class="token key atrule">bash</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    echo &quot;&gt;&gt;&gt; Compile vscode-test&quot;
    yarn &amp;&amp; yarn compile
    echo &quot;&gt;&gt;&gt; Compiled vscode-test&quot;
    cd sample
    echo &quot;&gt;&gt;&gt; Run sample integration test&quot;
    yarn &amp;&amp; yarn compile &amp;&amp; yarn test</span>
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Run Tests
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
    <span class="token key atrule">DISPLAY</span><span class="token punctuation">:</span> <span class="token string">':99.0'</span>
</code></pre></div><p>Finally, <a href="https://docs.microsoft.com/azure/devops/pipelines/get-started-yaml?view=vsts#get-your-first-build" target="_blank" rel="noopener noreferrer">create a new pipeline<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in your DevOps project and point it to the <code>azure-pipelines.yml</code> file. Trigger a build and voilà:</p> <p><img src="images/continuous-integration/pipelines.png" alt="pipelines"></p> <p>You can enable the build to run continuously when pushing to a branch and even on pull requests. See <a href="https://docs.microsoft.com/azure/devops/pipelines/build/triggers" target="_blank" rel="noopener noreferrer">Build pipeline triggers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to learn more.</p> <h2 id="travis-ci"><a href="#travis-ci" aria-hidden="true" class="header-anchor">#</a> Travis CI</h2> <p><a href="https://github.com/microsoft/vscode-test" target="_blank" rel="noopener noreferrer">vscode-test<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> also includes a <a href="https://github.com/microsoft/vscode-test/blob/master/.travis.yml" target="_blank" rel="noopener noreferrer">Travis CI build definition<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Because the way to define environment variables is different from Azure Pipelines to Travis CI, the <code>xvfb</code> script is a little bit different:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">language</span><span class="token punctuation">:</span> node_js
<span class="token key atrule">os</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> osx
  <span class="token punctuation">-</span> linux
<span class="token key atrule">node_js</span><span class="token punctuation">:</span> <span class="token number">8</span>

<span class="token key atrule">install</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token punctuation">|</span><span class="token scalar string">
    if [ $TRAVIS_OS_NAME == &quot;linux&quot; ]; then
      export DISPLAY=':99.0'
      /usr/bin/Xvfb :99 -screen 0 1024x768x24 &gt; /dev/null 2&gt;&amp;1 &amp;
    fi</span>
<span class="token key atrule">script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token punctuation">|</span><span class="token scalar string">
    echo &quot;&gt;&gt;&gt; Compile vscode-test&quot;
    yarn &amp;&amp; yarn compile
    echo &quot;&gt;&gt;&gt; Compiled vscode-test&quot;
    cd sample
    echo &quot;&gt;&gt;&gt; Run sample integration test&quot;
    yarn &amp;&amp; yarn compile &amp;&amp; yarn test</span>
<span class="token key atrule">cache</span><span class="token punctuation">:</span> yarn
</code></pre></div><h2 id="automated-publishing"><a href="#automated-publishing" aria-hidden="true" class="header-anchor">#</a> Automated publishing</h2> <p>You can configure the CI to publish a new version of the extension automatically.</p> <p>The publish command is similar to publishing from a local environment using the <a href="https://github.com/Microsoft/vsce" target="_blank" rel="noopener noreferrer"><code>vsce</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> service but the command needs to also include the Personal Access Token (PAT).</p> <p>You shouldn't expose the PAT with the rest of the source code (it's a sensitive information), so you can store it in a &quot;secret variable&quot;. The value of that variable will not be exposed and you can use it in the <code>azure-pipelines.yml</code> file.</p> <p>To create a secret variable, follow the <a href="https://docs.microsoft.com/azure/devops/pipelines/process/variables?tabs=classic%2Cbatch#secret-variables" target="_blank" rel="noopener noreferrer">Azure DevOps Secrets instructions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Next steps will be:</p> <ol><li>Install <code>vsce</code> as a <code>devDependencies</code> (<code>npm install vsce --save-dev</code> or <code>yarn add vsce --dev</code>).</li> <li>Declare a <code>deploy</code> script in <code>package.json</code> without the PAT.</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;deploy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vsce publish -p&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>Configure the CI so the build will run for all the branches that include tags by adding a <code>trigger</code> section in <code>azure-pipelines.yml</code>:</li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">trigger</span><span class="token punctuation">:</span>
  <span class="token key atrule">branches</span><span class="token punctuation">:</span>
    <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span>
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span>
</code></pre></div><ol start="4"><li>Add a <code>publish</code> step in <code>azure-pipelines.yml</code> that calls <code>yarn deploy</code> with the secret variable. (<code>VSCODE_MARKETPLACE_TOKEN</code> in the example should be replaced with the name of the secret you created at the beginning of the process).</li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">bash</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    echo &quot;&gt;&gt;&gt; Publish&quot;
    yarn deploy $(VSCODE_MARKETPLACE_TOKEN)</span>
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Publish
  <span class="token key atrule">condition</span><span class="token punctuation">:</span> and(succeeded()<span class="token punctuation">,</span> startsWith(variables<span class="token punctuation">[</span><span class="token string">'Build.SourceBranch'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 'refs/tags/')<span class="token punctuation">,</span> eq(variables<span class="token punctuation">[</span><span class="token string">'Agent.OS'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 'Linux'))
</code></pre></div><p>The <a href="https://docs.microsoft.com/azure/devops/pipelines/process/conditions" target="_blank" rel="noopener noreferrer"><code>condition</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> property tells the CI to run the publish step only in certain cases.</p> <p>In our example, the condition has three checks:</p> <ul><li><code>succeeded()</code> - Publish only if the tests pass.</li> <li><code>startsWith(variables['Build.SourceBranch'], 'refs/tags/')</code> - Publish only if a tagged (release) build.</li> <li><code>eq(variables['Agent.OS'], 'Linux')</code> - Include if your build runs on multiple agents (Windows, Linux, etc.). If not, remove that part of the condition.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.69530766.js" defer></script><script src="/assets/js/2.6081b710.js" defer></script><script src="/assets/js/51.2a2a5129.js" defer></script>
  </body>
</html>
